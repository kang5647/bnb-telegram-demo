import{r as s,a6 as $,o as m}from"./index-BRu3AybB.js";var L=["alpha","numeric","alphanumeric"],M={alpha:{type:"text",inputMode:"text",pattern:"[a-zA-Z]{1}"},alphanumeric:{type:"text",inputMode:"text",pattern:"[a-zA-Z0-9]{1}"},numeric:{type:"tel",inputMode:"numeric",pattern:"[0-9]{1}",min:"0",max:"9"}},P=s.forwardRef(({allowedCharacters:f="alphanumeric",ariaLabel:h,autoFocus:x=!0,containerClassName:E,disabled:w,inputClassName:C,isPassword:y=!1,length:g=6,placeholder:N,onChange:v,code:p=""},S)=>{if(isNaN(g)||g<1)throw new Error("Length should be a number and greater than 0");if(!L.some(e=>e===f))throw new Error("Invalid value for allowedCharacters. Use alpha, numeric, or alphanumeric");let t=s.useRef([]),c=M[f];s.useImperativeHandle(S,()=>({focus:()=>{t.current&&t.current[0].focus()},clear:()=>{if(t.current){for(let e=0;e<t.current.length;e++)t.current[e].value="";t.current[0].focus()}o()}})),s.useEffect(()=>{x&&$()&&t.current[0].focus()},[]),s.useEffect(()=>{if(p){for(let e=0;e<t.current.length;e++)t.current[e].value="";for(let e=0;e<p.length;e++)t.current[e].value=p[e];o()}},[p]);let d=t.current.map(e=>e.value).join("")||"",o=()=>{let e=t.current.map(r=>r.value).join("");d!==e&&(v&&v(e),d=e)},k=e=>{var r;let{target:{value:a,nextElementSibling:n}}=e;if(a.length==1)a.match(c.pattern)?n!==null&&n.focus():e.target.value="";else if(a.length>1){let u=a,l=Number(e.target.getAttribute("data-index"))||0;for(let i=0;i<u.length;i++){let b=u.charAt(i);b.match(c.pattern)&&((r=t.current)!=null&&r[l])&&(t.current[l].value=b,t.current[l].nextElementSibling!==null&&(t.current[l].nextElementSibling.focus(),l++))}}setTimeout(()=>{o()})},A=e=>{let{key:r}=e,a=e.target;if(r==="Backspace"){if(a.value===""){if(a.previousElementSibling!==null){let n=a.previousElementSibling;n.value="",n.focus(),e.preventDefault()}}else a.value="";setTimeout(()=>{o()})}},D=e=>{e.target.select()},R=e=>{var r;let a=(r=e.clipboardData.getData("Text"))!=null?r:"";a=a.replace(/\s/g,"").substring(0,6);let n=0;for(let u=0;u<a.length;u++){let l=a.charAt(u),i=t.current[n].value;l.match(c.pattern)&&(i||(t.current[n].value=l,t.current[n].nextElementSibling!==null&&(t.current[n].nextElementSibling.focus(),n++)))}o(),e.preventDefault()};return m.createElement("div",{className:E},new Array(6).fill(0).map((e,r)=>m.createElement("input",{key:r,"data-index":r,onChange:k,onKeyDown:A,onFocus:D,onPaste:R,...c,type:y?"password":c.type,ref:a=>{t.current[r]=a},className:C,autoComplete:r===0?"one-time-code":"off","aria-label":h?`${h}. Character ${r+1}.`:`Character ${r+1}.`,disabled:w,placeholder:N})),m.createElement("div",{className:"input-code-mask",onClick:e=>{e.preventDefault(),e.stopPropagation();for(let r=t.current.length-1;r>=0;r--)if(r>0&&!t.current[r].value&&t.current[r-1].value||r===0&&!t.current[r].value||r==t.current.length-1&&t.current[r].value){t.current[r].focus(),t.current[r].setSelectionRange(t.current[r].value.length,t.current[r].value.length);break}}}))}),j=P;export{j as K};
